/*! For license information please see jpcrm-woo-sync-settings-connections.min.js.LICENSE.txt */
(()=>{var o={};jQuery((function(o){jQuery("#jpcrm-woosync-connect-to-store").on("click",(function(){var o='<div style="font-size: 1.2em;padding: 0.3em;">'+zeroBSCRMJS_globViewLang("connect-woo-site-url")+'<br /><div class="ui input" style="width: 350px;"><input type="text" name="jpcrm-connect-woocommerce-store-url" id="jpcrm-connect-woocommerce-store-url" value="" placeholder="'+zeroBSCRMJS_globViewLang("connect-woo-site-placeholder")+'" /></div><div class="jpcrm-woosync-add-connection-errors"><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url-empty">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-empty")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-detail")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url-http">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-http")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url-duplicate">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-duplicate")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-ajax-error">'+zeroBSCRMJS_globViewLang("connect-woo-ajax-error")+"</div></div></div>";swal({title:'<i class="plug icon"></i> '+zeroBSCRMJS_globViewLang("connect-woo"),html:o,type:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_globViewLang("connect-woo-go"),cancelButtonText:zeroBSCRMJS_globViewLang("cancel"),customClass:"swal-wide",preConfirm:function(){var o=jpcrm_strip_trailing_slashes(jQuery("#jpcrm-connect-woocommerce-store-url").val());return new Promise((function(e,n){if(jQuery(".jpcrm-woosync-add-connection-errors > div").addClass("hidden"),""===o)return jQuery("#jpcrm-woosync-connect-to-store-invalid-url-empty").removeClass("hidden"),n(),!1;if(window.zbs_root.woosync_connections&&window.zbs_root.woosync_connections.indexOf(o)>=0)return jQuery("#jpcrm-woosync-connect-to-store-invalid-url-duplicate").removeClass("hidden"),n(),!1;if("http:"==o.substring(0,5))return jQuery("#jpcrm-woosync-connect-to-store-invalid-url-http").removeClass("hidden"),n(),!1;if("https://"!==o.substring(0,8)&&(o="https://"+o),!jpcrm_looks_like_URL(o))return jQuery("#jpcrm-woosync-connect-to-store-invalid-url").removeClass("hidden"),n(),!1;var r={action:"jpcrm_woosync_get_auth_url",sec:window.zbs_root.woosync_token,site_url:o};jQuery.ajax({type:"POST",url:ajaxurl,data:r,dataType:"json",timeout:2e4,success:function(o){void 0!==o.target_url?window.location.replace(o.target_url):jQuery("#jpcrm-woosync-connect-to-store-ajax-error").removeClass("hidden"),e()},error:function(o){jQuery("#jpcrm-woosync-connect-to-store-ajax-error").removeClass("hidden"),e()}})})).catch((o=>!1))}}).then((function(o){o.value}))}))}));var e=window="undefined"==typeof window?{}:window;for(var n in o)e[n]=o[n];o.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})})();