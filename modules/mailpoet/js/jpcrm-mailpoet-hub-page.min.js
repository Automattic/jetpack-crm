/*! For license information please see jpcrm-mailpoet-hub-page.min.js.LICENSE.txt */
(()=>{var e={900:e=>{function jpcrm_mailpoet_initiate_sync(){jQuery("#jpcrm_failed_ajax").hide(),jQuery("#jpcrm_firing_ajax").addClass("active"),jpcrm_mailpoet_fire_sync((function(e){jQuery("#jpcrm_failed_ajax").hide();var t=1e3,r=-1,a=-1;if(void 0!==e.status){switch(e.total_crm_contacts_from_mailpoet&&(document.getElementById("jpcrm-mailpoet-stat-contacts-synced").innerHTML=e.total_crm_contacts_from_mailpoet,e.total_crm_contacts_from_mailpoet>0&&jQuery("#jpcrm-mailpoet-recap-link-to-contacts").removeClass("hidden")),e.status){case"job_in_progress":void 0===window.jpcrm_mailpoet_sync_blocked_runs&&(window.jpcrm_mailpoet_sync_blocked_runs=0),window.jpcrm_mailpoet_sync_blocked_runs++,t=1e4;break;case"sync_part_complete":document.getElementById("jpcrm-mailpoet-status-short-text").textContent=e.status_short_text+" ("+Math.round(e.percentage_completed)+"%)";break;case"sync_completed":return jQuery("#jpcrm_firing_ajax").removeClass("active"),document.getElementById("jpcrm-mailpoet-status-icon").className="icon thumbs up green",document.getElementById("jpcrm-mailpoet-status-short-text").textContent=e.status_short_text,void(document.getElementById("jpcrm-mailpoet-status-long-text").textContent=e.status_long_text);case"not_in_ready_mode":case"error":return jQuery("#jpcrm_firing_ajax").removeClass("active"),jQuery("#jpcrm_failed_ajax").show(),document.getElementById("jpcrm-mailpoet-status-icon").className="icon settings orange",document.getElementById("jpcrm-mailpoet-status-short-text").textContent=e.status_short_text,document.getElementById("jpcrm-mailpoet-status-short-text").className="status orange",void(document.getElementById("jpcrm-mailpoet-status-long-text").textContent=e.status_long_text)}void 0!==e.remaining_pages&&(r=parseInt(e.remaining_pages)),void 0!==e.percentage_completed&&(a=e.percentage_completed);var o="";r>0&&(o=jpcrm_mailpoet_language_label("pages_remain","{0} pages remain").format(r)),a>0&&(o+=" ("+Math.round(a)+"%)"),""!==o&&jQuery("#jpcrm_firing_ajax").attr("title",o),void 0===window.jpcrm_mailpoet_sync_blocked_runs||window.jpcrm_mailpoet_sync_blocked_runs<10?jpcrm_sleep(t).then((()=>{jpcrm_mailpoet_initiate_sync()})):(error_type="caught_mid_job",error_string=jpcrm_mailpoet_language_label(error_type,"Import job is running in the back end. If this message is still shown after some time, please contact support."),jQuery("#jpcrm_firing_ajax").removeClass("active"),document.getElementById("jpcrm-mailpoet-status-short-text").textContent=error_type,document.getElementById("jpcrm-mailpoet-status-long-text").textContent=error_string)}}),(function(e){var t="";if("timeout"==e.statusText)error_type="caught_mid_job",t=jpcrm_mailpoet_language_label(error_type,"Import job is running in the back end. If this message is still shown after some time, please contact support.");else{if(0==e.status&&"error"==e.statusText)return;error_type="server_error",t=jpcrm_mailpoet_language_label(error_type,"There was a general server error.")+" ("+e.status+")",document.getElementById("jpcrm-mailpoet-status-icon").className="icon thumbs down red",document.getElementById("jpcrm-mailpoet-status-short-text").className="status red",sleep_time=2e4,jpcrm_sleep(sleep_time).then((()=>{jpcrm_mailpoet_initiate_sync()}))}jQuery("#jpcrm_firing_ajax").removeClass("active"),document.getElementById("jpcrm-mailpoet-status-short-text").textContent=error_type,document.getElementById("jpcrm-mailpoet-status-long-text").textContent=t}))}function jpcrm_mailpoet_fire_sync(e,t){if(!window.jpcrm_mailpoet_firing_sync){window.jpcrm_mailpoet_firing_sync=!0;var r={action:"jpcrm_mailpoet_fire_sync_job",sec:window.jpcrm_mailpoet_nonce};jQuery.ajax({type:"POST",url:ajaxurl,data:r,dataType:"json",timeout:2e4,success:function(t){window.jpcrm_mailpoet_firing_sync=!1,"function"==typeof e&&e(t)},error:function(e){window.jpcrm_mailpoet_firing_sync=!1,"function"==typeof t&&t(e)}})}}function jpcrm_mailpoet_language_label(e,t){return void 0!==window.jpcrm_mailpoet_language_labels&&void 0!==window.jpcrm_mailpoet_language_labels[e]?window.jpcrm_mailpoet_language_labels[e]:void 0===t?"":t}jQuery((function(e){if(window.jpcrm_mailpoet_initiate_ajax_sync){jpcrm_mailpoet_initiate_sync();var t=new URL(location);t.searchParams.delete("definitely_restart_sync"),history.replaceState(null,null,t)}jQuery(".jpcrm-clickable").on("click",(function(){var e=jQuery(this).attr("data-href");e&&window.open(e,"_blank").trigger("focus")}))})),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,r){return void 0!==e[r]?e[r]:t}))}),e.exports={jpcrm_mailpoet_initiate_sync:jpcrm_mailpoet_initiate_sync,jpcrm_mailpoet_fire_sync:jpcrm_mailpoet_fire_sync,jpcrm_mailpoet_language_label:jpcrm_mailpoet_language_label}}},t={};var r=function __webpack_require__(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,__webpack_require__),o.exports}(900),a=window="undefined"==typeof window?{}:window;for(var o in r)a[o]=r[o];r.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();