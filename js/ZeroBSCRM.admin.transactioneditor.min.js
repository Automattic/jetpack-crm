/*! For license information please see ZeroBSCRM.admin.transactioneditor.min.js.LICENSE.txt */
(()=>{var e={};function zbscrmjs_build_custInv_dropdown(e,i){var n=jQuery("#invoice_id").val();if(""!=e)jQuery("#invoiceFieldWrap").append(zbscrm_js_uiSpinnerBlocker()),zbscrm_js_getCustInvs(e,(function(e){let n='<select id="invoice_id" name="invoice_id" class="form-control">';e.length>0?(n+='<option value="" disabled="disabled"',(void 0===i||i<=0)&&(n+=' selected="selected"'),n+=">"+zeroBSCRMJS_transEditLang("selectinv","Select Invoice")+"</option>",n+='<option value="">'+zeroBSCRMJS_transEditLang("none","None")+"</option>",jQuery.each(e,(function(e,t){let o="",a=-1;zbscrm_JS_DAL()>2?(a=t.id,o="#"+t.id,void 0!==t.id_override&&(o+=" - "+t.id_override)):(a=t.id,void 0!==t.zbsid?o+="#"+t.zbsid:o+="#PID:"+t.id),void 0!==t.meta&&(void 0!==t.meta.val&&(o+=" ("+window.zbs_root.currencyOptions.currencyStr+t.meta.val+")"),void 0!==t.meta.date&&(o+=" - "+t.meta.date)),n+='<option value="'+a+'"',void 0!==i&&a==i&&(n+=' selected="selected"'),n+=">"+o+"</option>"}))):n+='<option value="" disabled="disabled" selected="selected">'+zeroBSCRMJS_transEditLang("noinvoices","None Found")+"</option>",n+="</select>",jQuery("#invoiceFieldWrap").html(n),jQuery(".assignInvToCust").show(),setTimeout((function(){zeroBSCRMJS_bindInvSelect()}),0)}),(function(e){if(jQuery(".assignInvToCust").hide(),0==(i=n))var i="";jQuery("#invoiceFieldWrap").html('<input style="max-width:200px;" id="invoice_id" name="invoice_id" value="'+i+'" class="form-control">')}));else{if(jQuery(".assignInvToCust").show(),0==n)n="";jQuery("#invoiceFieldWrap").html('<input style="max-width:200px;" id="invoice_id" name="invoice_id" value="'+n+'" class="form-control">'),setTimeout((function(){zeroBSCRMJS_bindInvSelect()}),0)}}function zeroBSCRMJS_bindInvSelect(){jQuery("#invoice_id").on("change",(function(){zeroBSCRMJS_showInvLinkIf()})),zeroBSCRMJS_showInvLinkIf()}function zeroBSCRMJS_showInvLinkIf(){jQuery("#invoiceSelectionTitle .zbs-view-invoice").remove();let e=jQuery("#invoiceFieldWrap select").val();if(null!=e&&""!==e&&(e=parseInt(e),e>0)){let e='<div class="ui right floated mini animated button zbs-view-invoice" style="margin-left:0.5em">';e+='<div class="visible content">'+zeroBSCRMJS_transEditLang("view","View")+"</div>",e+='<div class="hidden content">',e+='<i class="icon file text"></i>',e+="</div>",e+="</div>",jQuery("#invoiceSelectionTitle").prepend(e),jQuery("#invoiceSelectionTitle .zbs-view-invoice").off("click").on("click",(function(){const e=parseInt(jQuery("#invoiceFieldWrap select").val()),i=window.zeroBSCRMJS_transactionedit_links.editinvprefix+e;window.open(i,"_parent")}))}}function zeroBSCRMJS_showContactLinkIf(e){if(jQuery("#zbs-customer-title .zbs-view-contact").remove(),jQuery("#zbs-transaction-learn-nav .zbs-trans-quicknav-contact").remove(),null!=e&&""!==e&&(e=parseInt(e))>0){const i=window.zbsObjectViewLinkPrefixCustomer+e;let n='<div class="ui right floated mini animated button zbs-view-contact">';n+='<div class="visible content">'+zeroBSCRMJS_transEditLang("view","View")+"</div>",n+='<div class="hidden content">',n+='<i class="user icon"></i>',n+="</div>",n+="</div>",jQuery("#zbs-customer-title").prepend(n);const t='<a target="_blank" style="margin-left:6px;" class="zbs-trans-quicknav-contact ui icon button blue mini labeled" href="'+i+'"><i class="user icon"></i> '+zeroBSCRMJS_transEditLang("contact","Contact")+"</a>";jQuery("#zbs-transaction-learn-nav").append(t),jQuery("#zbs-customer-title .zbs-view-contact").off("click").on("click",(function(){let e=parseInt(jQuery("#customer").val());if(null!=e&&""!==e&&(e=parseInt(e),e>0)){const i=window.zbsObjectViewLinkPrefixCustomer+e;window.open(i,"_parent")}}))}}function zeroBSCRMJS_showCompanyLinkIf(e){if(jQuery("#zbs-company-title .zbs-view-company").remove(),jQuery("#zbs-transaction-learn-nav .zbs-trans-quicknav-company").remove(),null!=e&&""!==e&&(e=parseInt(e))>0){let i='<div class="ui right floated mini animated button zbs-view-company">';i+='<div class="visible content">'+zeroBSCRMJS_transEditLang("view","View")+"</div>",i+='<div class="hidden content">',i+='<i class="building icon"></i>',i+="</div>",i+="</div>",jQuery("#zbs-company-title").prepend(i);const n='<a target="_blank" style="margin-left:6px;" class="zbs-trans-quicknav-company ui icon button blue mini labeled" href="'+window.zeroBSCRMJS_transactionedit_links.editcompanyprefix+e+'"><i class="building icon"></i> '+zeroBSCRMJS_transEditLang("company","Company")+"</a>";jQuery("#zbs-transaction-learn-nav").append(n),jQuery("#zbs-company-title .zbs-view-company").off("click").on("click",(function(){let e=parseInt(jQuery("#zbsct_company").val());if(null!=e&&""!==e&&(e=parseInt(e),e>0)){const i=window.zeroBSCRMJS_transactionedit_links.editcompanyprefix+e;window.open(i,"_parent")}}))}}function zeroBSCRMJS_transEditLang(e,i){if(void 0===i)i="";return void 0!==window.zeroBSCRMJS_transactionedit_lang[e]?window.zeroBSCRMJS_transactionedit_lang[e]:i}jQuery((function(){if(jQuery("#customer").val()){let e=!1;jQuery("#invoice_id").val()&&(e=jQuery("#invoice_id").val()),zbscrmjs_build_custInv_dropdown(jQuery("#customer").val(),e)}setTimeout((function(){zeroBSCRMJS_showInvLinkIf(),zeroBSCRMJS_showContactLinkIf(jQuery("#customer").val()),zeroBSCRMJS_showCompanyLinkIf(jQuery("#zbsct_company").val())}),0)}));var i=window="undefined"==typeof window?{}:window;for(var n in e)i[n]=e[n];e.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();