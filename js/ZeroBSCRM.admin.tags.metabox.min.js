/*! For license information please see ZeroBSCRM.admin.tags.metabox.min.js.LICENSE.txt */
(()=>{var t={25:t=>{function zbsJS_drawTag(t,e){var a='<div class="ui small basic label teal" data-id="'+e+'"><i class="window close icon zbs-remove-tag"></i> <span>'+t+"</span></div>";jQuery("#zbs-tags-wrap").append(a),setTimeout((function(){jQuery(".zbs-remove-tag").off("click").on("click",(function(){var t=jQuery("span",jQuery(this).parent()).html(),e=window.zbsCRMJS_currentTags.indexOf(t);e>-1&&window.zbsCRMJS_currentTags.splice(e,1),jQuery(this).parent().remove(),zbscrm_JS_addDirty("zbs-tags")}))}),0)}function zbsJS_addTagAction(t){""!=t&&-1==jQuery.inArray(t,window.zbsCRMJS_currentTags)&&(zbsJS_drawTag(t,-1),window.zbsCRMJS_currentTags.push(t),jQuery("#zbs-add-tag-value").val(""),zbscrm_JS_addDirty("zbs-tags"))}jQuery((function(){}));function zeroBSCRMJS_tagManager_bindTagEditButtons(){jQuery(".zbs-delete-tag").off("click").on("click",(function(){var t=parseInt(jQuery(this).attr("data-tagid"));t>0&&swal({title:window.zbsTagListLang.deleteswaltitle,text:window.zbsTagListLang.deleteswaltext,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:window.zbsTagListLang.deleteswalconfirm,allowOutsideClick:!1}).then((function(e){if(e.value){var a={action:"zbs_delete_tag",tagid:t,sec:window.zbscrmjs_secToken};jQuery.ajax({type:"POST",url:ajaxurl,data:a,dataType:"json",timeout:2e4,success:function(t){swal(window.zbsTagListLang.tagdeleted,window.zbsTagListLang.tagremoved,"success"),location.reload()},error:function(t){swal(window.zbsTagListLang.tagnotdeleted,window.zbsTagListLang.tagnotremoved,"warning")}})}}))}))}t.exports={zeroBSCRMJS_buildTags:function(){"object"==typeof window.zbsCRMJS_currentTags&&jQuery.each(window.zbsCRMJS_currentTags,(function(t,e){void 0===window.zbsDontDrawTags&&zbsJS_drawTag(e,-1)})),setTimeout((function(){void 0===window.zbsCustomTagInitFunc?(jQuery("#zbs-add-tag-action").off("click").on("click",(function(){zbsJS_addTagAction(jQuery("#zbs-add-tag-value").val())})),jQuery("#zbs-add-tag-value").on("keypress",(function(t){13==t.keyCode&&zbsJS_addTagAction(jQuery("#zbs-add-tag-value").val())})),jQuery("#zbs-tag-suggestions-show-more").off("click").on("click",(function(){jQuery("#zbs-tag-suggestions-show-more").hide(),jQuery("#zbs-tag-suggestions-more-wrap").show()})),jQuery("#zbs-tag-suggestions-show-less").off("click").on("click",(function(){jQuery("#zbs-tag-suggestions-show-more").show(),jQuery("#zbs-tag-suggestions-more-wrap").hide()})),jQuery(".zbsTagSuggestion").off("click").on("click",(function(){zbsJS_addTagAction(jQuery(this).html())}))):window[zbsCustomTagInitFunc]({})}),0)},zeroBSCRMJS_buildTagsInput:function(){var t=JSON.stringify(window.zbsCRMJS_currentTags);jQuery("#zbs-tag-list").val(t)},zbsJS_bindTagManagerInit:function(){zeroBSCRMJS_tagManager_bindTagEditButtons(),jQuery("#zbs-add-tag-action").off("click").on("click",(function(){var t=jQuery("#zbs-add-tag-value").val();""!=t&&-1==jQuery.inArray(t,window.zbsCRMJS_currentTags)?function(t,e,a){if(!window.zbsTagManagerUpdateAJAXBlocker){window.zbsTagManagerUpdateAJAXBlocker=!0;var n={action:"zbs_add_tag",sec:window.zbscrmjs_secToken,objtype:window.zbsEditSettings.objdbname,tag:t};jQuery.ajax({type:"POST",url:ajaxurl,data:n,dataType:"json",timeout:2e4,success:function(t){"function"==typeof e&&e(t),window.zbsTagManagerUpdateAJAXBlocker=!1},error:function(t){"function"==typeof a&&a(t),window.zbsTagManagerUpdateAJAXBlocker=!1}})}}(t,(function(e){var a=t,n=-1;void 0!==e.id&&(n=e.id);var s=a;void 0!==e.slug&&(s=e.slug),window.zbsCRMJS_currentTags.push(a),jQuery("#zbsNoTagResults").hide(),jQuery("#zbs-add-tag-value").val("");var o='<tr><td><span class="ui large blue label">'+a+"</span></td><td>"+s+'</td><td class="center aligned">0</td><td class="center aligned"><button type="button" class="ui mini button orange zbs-delete-tag" data-tagid="'+n+'"><i class="trash alternate icon"></i> '+window.zbsTagListLang.delete+"</button></td></tr>";jQuery("#zbs-tag-manager tbody").append(o),setTimeout((function(){zeroBSCRMJS_tagManager_bindTagEditButtons()}),0)}),(function(t){})):""==t?(jQuery("#zbsTagEmpty").show().css("margin-bottom","1em"),setTimeout((function(){jQuery("#zbsTagEmpty").hide()}),4e3)):(jQuery("#zbsTagAlreadyExists").show().css("margin-bottom","1em"),setTimeout((function(){jQuery("#zbsTagAlreadyExists").hide()}),4e3))})),jQuery("#zbs-add-tag-value").on("keypress",(function(t){13==t.keyCode&&(jQuery("#zbs-add-tag-action").trigger("click"),t.preventDefault())}))}}}},e={};var a=function __webpack_require__(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,__webpack_require__),s.exports}(25),n=window="undefined"==typeof window?{}:window;for(var s in a)n[s]=a[s];a.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();