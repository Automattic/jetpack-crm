(()=>{var e={603:e=>{function zbscrm_appendTextToEditor(e){if("function"==typeof window.parent.send_to_editor)window.parent.send_to_editor(e)}function zbscrm_getTemplatedQuote(e,t){if(!window.quoteTemplateBlocker){window.quoteTemplateBlocker=!0;var o=jQuery("#zbscq_customer").length>0?parseInt(jQuery("#zbscq_customer").val()):-1,a=jQuery("#zbs_quote_template_id").length>0?parseInt(jQuery("#zbs_quote_template_id").val()):-1,i=jQuery("#name").length>0?jQuery("#name").val():"",r=jQuery("#val").length>0?jQuery("#val").val():"",l=jQuery("#date").length>0?jQuery("#date").val():"",s={};if(zbscrm_JS_DAL()>2)jQuery.map(jQuery("#zbs-edit-form").serializeArray(),(function(e,t){s[e.name]=e.value}));if(o>0)if(a>0)quoteTemplateAJAX=jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"zbs_get_quote_template",quote_fields:s,cust_id:o,quote_type:a,quote_title:i,quote_val:r,quote_dt:l,security:jQuery("#quo-ajax-nonce").val()},dataType:"json"}),quoteTemplateAJAX.done((function(o){if(1==o.error||-1==o.processed){if(swal({title:"Error!",text:"Failed retrieving template! If this error persists please contact Jetpack CRM support.",type:"error",confirmButtonText:"OK"}),"function"==typeof t)t()}else{if(swal({title:"Success!",text:"Quote Template Populated",type:"success",confirmButtonText:"OK",confirmButtonColor:"#000"}),setTimeout((function(){zbscrm_appendTextToEditor(o.html)}),500),jQuery("#title").length>0&&""==jQuery("#title").val())jQuery("#title").val(o.template_title);if(jQuery("#value").length>0&&""==jQuery("#value").val())jQuery("#value").val(o.template_value);if(jQuery("#notes").length>0&&""==jQuery("#notes").val())jQuery("#notes").val(o.template_notes);if("function"==typeof e)e()}window.quoteTemplateBlocker=!1})),quoteTemplateAJAX.fail((function(e){if(swal({title:"Error!",text:"Failed retrieving template! If this error persists please contact Jetpack CRM support.",type:"error",confirmButtonText:"OK"}),"function"==typeof t)t();window.quoteTemplateBlocker=!1}));else{if("function"==typeof e)e();window.quoteTemplateBlocker=!1}else return swal({title:"Error!",text:"Please Choose a Contact",type:"error",confirmButtonText:"OK",confirmButtonColor:"#000"}),window.quoteTemplateBlocker=!1,!1}}function jpcrm_quotes_send_email_modal(){var e=jQuery("#zbsQuoteBuilderEmailTo").val();if(void 0!==e&&""!=e&&zbscrm_JS_validateEmail(e)){var t='<div id="jpcrm_quote_email_modal_opts">';if(t+='<div class="jpcrm-send-email-modal-field">',t+='<label for="jpcrm_quote_email_modal_toemail">'+jpcrm_quotes_lang("toemail")+"</label>",t+='<input type="email" id="jpcrm_quote_email_modal_toemail" value="'+e+'" placeholder="'+jpcrm_quotes_lang("toemailplaceholder")+'" />',t+="</div>",jQuery(".zbsFileLine").length>0){t+='<div class="jpcrm-send-email-modal-field">';var o="";if(jQuery("#zbsc_sendattachments").is(":checked"))o='checked="checked" ';t+='<input type="checkbox" id="jpcrm_quote_email_modal_attachassoc" value="1" '+o+"/>",t+='<label for="jpcrm_quote_email_modal_attachassoc">'+jpcrm_quotes_lang("attachassoc")+"</label>",t+="</div>"}t+='<div class="jpcrm-send-email-modal-field">',t+='<input type="checkbox" id="jpcrm_quote_email_modal_attachaspdf" value="1" '+(o='checked="checked" ')+"/>",t+='<label for="jpcrm_quote_email_modal_attachaspdf">'+jpcrm_quotes_lang("attachpdf")+"</label>",t+="</div>",t+="</div>",swal({title:jpcrm_quotes_lang("send_email"),html:'<div class="ui segment">'+jpcrm_quotes_lang("sendthisemail")+t+"</div>",type:"question",showCancelButton:!0,confirmButtonColor:"#000",cancelButtonColor:"#fff",cancelButtonText:'<span style="color: #000">Cancel</span>',confirmButtonText:jpcrm_quotes_lang("sendthemail")}).then((function(e){if(e.value){var t=jQuery("#jpcrm_quote_email_modal_toemail").val(),o=parseInt(jQuery("#zbsQuoteBuilderEmailTo").attr("data-quoteid"));if(void 0!==t&&""!=t&&zbscrm_JS_validateEmail(t)&&o>0){var a=-1;if(jQuery("#jpcrm_quote_email_modal_attachassoc").length>0&&jQuery("#jpcrm_quote_email_modal_attachassoc").is(":checked"))a=1;var i=-1;if(jQuery("#jpcrm_quote_email_modal_attachaspdf").length>0&&jQuery("#jpcrm_quote_email_modal_attachaspdf").is(":checked"))i=1;var r={id:o,cid:jQuery("#zbscq_customer").val(),email:t,attachassoc:a,attachpdf:i};swal.fire({title:jpcrm_quotes_lang("sendingemail"),html:'<div style="clear:both">&nbsp;</div><div class="ui active loader" style="margin-top:2em;padding-bottom:2em"></div><div style="clear:both">&nbsp;</div>',showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:!1}),jpcrm_quotes_send_email(r)}else swal.fire(jpcrm_quotes_lang("sendneedsassignment"))}}))}else swal.fire(jpcrm_quotes_lang("sendneedsassignment"))}function jpcrm_quotes_send_email(e){if(!window.jpcrmQuoteBlocker)if(window.jpcrmQuoteBlocker=!0,void 0!==e.id&&e.id>0&&void 0!==e.email&&zbscrm_JS_validateEmail(e.email)){var t={action:"jpcrm_quotes_send_quote",sec:window.zbsEditSettings.nonce,em:e.email,qid:e.id,cid:e.cid,attachassoc:e.attachassoc,attachpdf:e.attachpdf};jQuery.ajax({url:ajaxurl,type:"POST",data:t,dataType:"json",success:function(e){swal(jpcrm_quotes_lang("senttitle"),jpcrm_quotes_lang("sent"),"info"),window.jpcrmQuoteBlocker=!1},error:function(e){swal(jpcrm_quotes_lang("senderrortitle")+" #19v3",jpcrm_quotes_lang("senderror"),"error"),window.jpcrmQuoteBlocker=!1}})}}function jpcrm_quotes_lang(e,t,o){if(void 0===t)t="";if(void 0!==window.zbsEditViewLangLabels[e])if(void 0===o)return window.zbsEditViewLangLabels[e];else if(void 0!==window.zbsEditViewLangLabels[e][o])return window.zbsEditViewLangLabels[e][o];return t}if(jQuery((function(){if(jQuery("#zbsQuoteBuilderStep2").on("click",(function(){zbscrm_getTemplatedQuote((function(){jQuery("#wpzbscsub_quotecontent").show(),jQuery("#zerobs-quote-content-edit").show(),jQuery("#wpzbscsub_quoteactions").show(),jQuery("#zerobs-quote-nextstep").show(),jQuery("#zbs-quote-builder-step-1").slideUp(),setTimeout((function(){if(jQuery("#zbs_quote_content_ifr").css("height","580px"),jQuery("#wpzbscsub_quotecontent").length>0)jQuery("html, body").animate({scrollTop:jQuery("#wpzbscsub_quotecontent").offset().top},2e3);if(jQuery("#zerobs-quote-content-edit").length>0)jQuery("html, body").animate({scrollTop:jQuery("#zerobs-quote-content-edit").offset().top},2e3)}),0)}))})),jQuery("#zbsQuoteBuilderStep3").on("click",(function(){jQuery("#publish").trigger("click")})),jQuery("#zbsQuoteBuilderEmailTo").on("keyup",(function(){var e=jQuery("#zbsQuoteBuilderEmailTo").val();if(void 0===e||""==e||!zbscrm_JS_validateEmail(e))jQuery("#zbsQuoteBuilderEmailTo").css("border","2px solid orange"),jQuery("#zbsQuoteBuilderEmailToErr").show();else jQuery("#zbsQuoteBuilderEmailTo").css("border","1px solid #ddd"),jQuery("#zbsQuoteBuilderEmailToErr").hide()})),jQuery("#zbsQuoteBuilderSendNotification").off("click").on("click",(function(e,t){jpcrm_quotes_send_email_modal()})),void 0!==window.zbscrm_templated)jQuery("#zbs-quote-builder-step-1").hide(),jQuery("#wpzbscsub_quotecontent").show(),jQuery("#zerobs-quote-content-edit").show(),jQuery("#wpzbscsub_quoteactions").show(),jQuery("#zerobs-quote-nextstep").show();if(jQuery("#zbsQuoteBuilderURL").length)document.getElementById("zbsQuoteBuilderURL").onclick=function(){this.select(),document.execCommand("copy")}})),1)e.exports={quoteTemplateBlocker:!1,zbscrm_appendTextToEditor:zbscrm_appendTextToEditor,zbscrm_getTemplatedQuote:zbscrm_getTemplatedQuote,jpcrm_quotes_send_email_modal:jpcrm_quotes_send_email_modal,jpcrm_quotes_send_email:jpcrm_quotes_send_email,jpcrm_quotes_lang:jpcrm_quotes_lang}}},t={};var o=function __webpack_require__(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,__webpack_require__),i.exports}(603),a=window="undefined"==typeof window?{}:window;for(var i in o)a[i]=o[i];if(o.__esModule)Object.defineProperty(a,"__esModule",{value:!0})})();