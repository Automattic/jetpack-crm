/*! For license information please see ZeroBSCRM.admin.singleview.min.js.LICENSE.txt */
(()=>{var e={};jQuery((function(){window.zbsViewSettings,void 0!==window.zbsViewSettings&&void 0!==window.zbsViewSettings.objdbname&&"contact"==window.zbsViewSettings.objdbname&&(console.log("======== CUSTOMER VIEW SCRIPTS ============="),jQuery("#zbs-vitals-box .tabular.menu .item").tab({context:"#zbs-vitals-box"}),jQuery("#zbs-doc-menu .tabular.menu .item").tab({context:"#zbs-doc-menu"}),jQuery(".ui.dropdown").dropdown(),jQuery(".zbs-contact-action").off("click").on("click",(function(){var e=jQuery(this).attr("data-action");if(void 0!==e&&"url"===e){var i=jQuery(this).attr("data-url");void 0!==i&&""!=i&&(window.location=i)}})),jQuery(".zbs-view-vital-label i.info").popup({}),zeroBSCRMJS_bindViewFiles(),jQuery(".zbs-show-longdesc").off("click").on("click",(function(){jQuery(this).closest(".zbs-single-log").addClass("zbs-long-desc-show")})),jQuery(".zbs-hide-longdesc").off("click").on("click",(function(){jQuery(this).closest(".zbs-single-log").removeClass("zbs-long-desc-show")}))),void 0!==window.zbsViewSettings&&void 0!==window.zbsViewSettings.objdbname&&"company"==window.zbsViewSettings.objdbname&&(console.log("======== COMPANY VIEW SCRIPTS ============="),jQuery("#zbs-vitals-box .tabular.menu .item").tab({context:"#zbs-vitals-box"}),jQuery("#zbs-doc-menu .tabular.menu .item").tab({context:"#zbs-doc-menu"}),jQuery(".zbs-view-vital-label i.info").popup({}),zeroBSCRMJS_bindViewFiles())}));function zeroBSCRMJS_bindViewFiles(){jQuery(".zbsDelFile").on("click",(function(){var e="customer";if("company"==jQuery(this).attr("data-type")&&(e="company"),!window.zbsCurrentlyDeleting){window.zbsCurrentlyDeleting=!0;var i=jQuery(this).attr("data-delurl"),o=jQuery(this).closest("tr"),n=-1;if(void 0!==window.zbsViewSettings&&void 0!==window.zbsViewSettings.objid)n=window.zbsViewSettings.objid;if(void 0!==i&&""!=i&&n>0){var s={action:"delFile",zbsfType:e,zbsDel:i,zbsCID:n,sec:window.zbscrmjs_secToken};jQuery.ajax({type:"POST",url:ajaxurl,data:s,dataType:"json",timeout:2e4,success:function(e){jQuery(o).remove(),1==jQuery("#zbsFilesTable tr").length-1&&jQuery("#zbs-no-files-msg").show(),void 0!==e.errors&&e.errors.length>0&&jQuery.each(e.errors,(function(e,i){jQuery("#zbsFilesTable").after('<div class="ui warning message" style="margin-top:10px;">'+i+"</div>")}))},error:function(e){jQuery("#zbsFilesTable").append('<div class="ui warning message" style="margin-top:10px;"><strong>'+window.zbsViewLang.error+":</strong> "+window.zbsViewLang.unabletodelete+"</div>")}})}window.zbsCurrentlyDeleting=!1}}))}var i=window="undefined"==typeof window?{}:window;for(var o in e)i[o]=e[o];e.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();